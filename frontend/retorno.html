<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Retorno PayPhone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:#eaf0ff;
      min-height:100vh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(1200px 600px at 30% 10%, rgba(34,197,94,.25), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(124,58,237,.30), transparent 55%),
        linear-gradient(180deg, #0b1220, #121b30);
      padding: 28px 16px;
    }
    .card{
      width:min(760px, 100%);
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(15,23,48,.78);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      padding: 18px;
      backdrop-filter: blur(10px);
    }
    h2{margin:0 0 8px 0;}
    .muted{color:#a9b7e6; font-size:13px; line-height:1.4;}
    .ok{
      margin-top:12px;
      padding: 12px;
      border-radius: 14px;
      border:1px solid rgba(34,197,94,.35);
      background: rgba(34,197,94,.10);
    }
    pre{
      margin-top:12px;
      padding: 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.08);
      overflow:auto;
      max-height: 320px;
      font-size:12px;
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    button{
      cursor:pointer;
      border:none;
      border-radius:12px;
      padding:12px 14px;
      font-weight:800;
      color:white;
      background: linear-gradient(135deg, #7c3aed, #4f46e5);
    }
    .ghost{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      color:#eaf0ff;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>Retorno desde PayPhone ✅</h2>
    <div class="muted">
      Esta pantalla se abre cuando PayPhone finaliza el flujo y regresa al <b>responseUrl</b>.
      Aquí mostramos los parámetros recibidos y luego te enviamos al inicio.
    </div>

    <div class="ok" id="msg">
      Estado: <b>Retorno recibido</b> — Redirigiendo al inicio en <b><span id="sec">6</span>s</b>…
    </div>

    <pre id="params">{ }</pre>

    <div class="row">
      <button onclick="goHome()">Ir al inicio ahora</button>
      <button class="ghost" onclick="history.back()">Volver</button>
    </div>
  </div>

  <script>
    const paramsEl = document.getElementById("params");
    const secEl = document.getElementById("sec");

    const params = Object.fromEntries(new URLSearchParams(window.location.search).entries());
    paramsEl.textContent = JSON.stringify(params, null, 2);

    function goHome(){
      window.location.href = "index.html";
    }

    // Cuenta regresiva y redirección automática
    let s = 6;
    const timer = setInterval(() => {
      s--;
      secEl.textContent = String(s);
      if(s <= 0){
        clearInterval(timer);
        goHome();
      }
    }, 1000);
  </script>
</body>
</html>
